<Window x:Class="eZet.Eve.EveProfiteer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        xmlns:models="clr-namespace:eZet.Eve.EveProfiteer.Models"
        Title="Eve Profiteer" Height="588" Width="900">

    <DockPanel LastChildFill="True">
        <Menu IsMainMenu="True" DockPanel.Dock="Top" VerticalContentAlignment="Center">
            <MenuItem Header="_File"></MenuItem>
            <MenuItem Header="_Edit"></MenuItem>
            <MenuItem Header="_View"></MenuItem>
            <MenuItem Header="_Tools"></MenuItem>
            <MenuItem Header="_Help"/>
        </Menu>
        <StatusBar DockPanel.Dock="Bottom" Height="27">
            <StatusBarItem>
                <TextBlock>Statusbar</TextBlock>
            </StatusBarItem>
        </StatusBar>
        <DockPanel LastChildFill="True">
            <ToolBarTray DockPanel.Dock="Top">
                <ToolBar>
                    <Button Content="Analyze" Command="{Binding AnalyzeCommand}" CommandParameter="{Binding}" Margin="10 0" Padding="5"/>
                    <Button Content="IGB Link" Command="{Binding ScannerLinkCommand}" CommandParameter="{Binding}" Margin="10 0" Padding="5"/>
                    <Label>Region:</Label>
                    <ComboBox Width="150" ItemsSource="{Binding Regions}" DisplayMemberPath="RegionName" SelectedItem="{Binding SelectedRegion}">
                    </ComboBox>
                    <Label>Days:</Label>
                    <Slider Minimum="1" Maximum="20" Value="{Binding DayLimit}" Width="80" SmallChange="1" TickPlacement="TopLeft" LargeChange="5" TickFrequency="2"></Slider>
                    <Label Content="{Binding DayLimit}"/>
                </ToolBar>
                <ToolBar>
                    <Label>Profit:</Label>
                    <CheckBox IsChecked="{Binding ProfitFilterCheckBox}" Width="10" Height="10" Focusable="False"/>
                    <xctk:DecimalUpDown Value="{Binding ProfitFilterValue}" FormatString="N2" Increment="10000" Width="100"></xctk:DecimalUpDown>
                    <Label>Search:</Label>
                    <TextBox Text="{Binding SearchFilter, UpdateSourceTrigger=PropertyChanged}" Width="150"></TextBox>
                </ToolBar>

            </ToolBarTray>

            <Grid Name="MainGrid" Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="200"></ColumnDefinition>
                    <ColumnDefinition Width="auto"/>
                    <ColumnDefinition Width="*"></ColumnDefinition>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"></RowDefinition>
                </Grid.RowDefinitions>


                <TreeView Grid.Column="0" Name="ItemsTreeView" VirtualizingPanel.IsVirtualizing="True" Width="Auto" VerticalAlignment="Stretch" VerticalContentAlignment="Stretch"
                      ItemsSource="{Binding TreeRootNodes}">
                    <TreeView.Resources>
                        <HierarchicalDataTemplate DataType="{x:Type models:MarketGroup}" ItemsSource="{Binding Children}">
                            <StackPanel Orientation="Horizontal">
                                <CheckBox IsChecked="{Binding IsChecked}" Focusable="False"/>
                                <ContentPresenter Content="{Binding MarketGroupName}"/>
                            </StackPanel>
                        </HierarchicalDataTemplate>
                        <DataTemplate DataType="{x:Type models:Item}">
                            <StackPanel Orientation="Horizontal">
                                <CheckBox IsChecked="{Binding IsChecked}" Focusable="False"></CheckBox>
                                <TextBlock Text="{Binding TypeName}"></TextBlock>
                            </StackPanel>
                        </DataTemplate>
                    </TreeView.Resources>
                </TreeView>

                <GridSplitter Name="Splitter" Grid.Column="1" Margin="3" VerticalAlignment="Stretch" Width="5" ResizeBehavior="PreviousAndNext" Focusable="False" IsTabStop="False" Background="#FFD1DAEE"/>
                <DockPanel LastChildFill="True" Grid.Column="2">
                    <DataGrid ItemsSource="{Binding MarketAnalyzerResults}" VirtualizingPanel.VirtualizationMode="Recycling" AutoGenerateColumns="False" UseLayoutRounding="True">
                        <DataGrid.Columns>
                            <DataGridTemplateColumn>
                                <DataGridTemplateColumn.CellTemplate>
                                    <DataTemplate>
                                        <CheckBox IsChecked="{Binding IsChecked, UpdateSourceTrigger=PropertyChanged}"/>
                                    </DataTemplate>
                                </DataGridTemplateColumn.CellTemplate>
                            </DataGridTemplateColumn>
                            <DataGridTextColumn IsReadOnly="True" Header="Name" Binding="{Binding ItemName}"/>
                            <DataGridTextColumn IsReadOnly="True" Header="Profit Rating" Binding="{Binding TotalRating, StringFormat=N0}"/>
                            <DataGridTextColumn IsReadOnly="True" Header="Volume"  Binding="{Binding AvgVolume, StringFormat=N0}"/>
                            <DataGridTextColumn IsReadOnly="True" Header="Buy Price" Binding="{Binding AvgBuyPrice, StringFormat=N2}"/>
                            <DataGridTextColumn IsReadOnly="True" Header="Sell Price" Binding="{Binding AvgSellPrice, StringFormat=N2}"/>
                            <DataGridTextColumn IsReadOnly="True" Header="Profit per Item" Binding="{Binding ProfitPerItem, StringFormat=N2}"/>
                            <DataGridTextColumn IsReadOnly="True" Header="Daily Profit" Binding="{Binding DailyProfit, StringFormat=N2}"/>
                            <DataGridTextColumn IsReadOnly="True" Header="Margin" Binding="{Binding Margin, StringFormat=P2}"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </DockPanel>
            </Grid>
        </DockPanel>

    </DockPanel>
</Window>
